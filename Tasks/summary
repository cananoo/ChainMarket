一、编制目的
本文档旨在全面且系统地描述此系统的设计需求与功能规格，详细阐述系统的功能性需求和非功能性需求，明确系统的业务流程和技术架构，为系统测试提供依据，为后续系统开发、测试和部署提供明确的指导方向并作为系统验收的基准文档。
二、范围
1、产品标识
    产品名称：ChainMarket链上跳蚤市场
    产品类型：基于区块链的C2C二手商品交易平台
2、系统功能范围
    - 系统管理
    - 商品管理
- 订单管理
    - 链上数据管理
    - 争议仲裁处理
功能边界
    - 不支持法定货币直接交易
    - 不存储用户隐私数据
    - 不介入线下交易环节
三、应用目标
核心目标建立一个透明、安全、可信的二手商品交易平台通过区块链技术降低交易成本和信任成本，保护买卖双方权益，提供公平的交易环境。技术上确保交易数据的不可篡改性，实现智能合约的安全可靠执行，保证系统的可靠性。对用户提供直观简洁的操作界面，降低用户使用门槛，简化区块链相关的技术细节，提供类似传统电商的使用体验。

四、基本角色分为普通用户,管理员

五、功能综述：
5.2	系统管理
系统管理模块主要包含用户管理、审核管理、系统参数配置等子模块，各子模块中主要功能如下。
5.2.1	用户注册
【功能概述】
实现新用户在系统中的注册功能，包括基本信息填写、验证码校验等。
【操作者】
用户

【输入】
- 用户名：字符型，6-20位字符
- 密码：字符型，8-20位字符
- 手机号：数值型，11位数字
- 验证码：字符型，6位数字

【输出】
- 注册结果：成功/失败
- 用户ID：系统生成的唯一标识
- 提示信息：字符型，注册成功或失败原因

【数据来源】
用户输入

【展示界面】
注册表单页面，包含输入框和提交按钮用户钱包管理

5.2.2	用户账号审核
【功能概述】
管理员对新注册用户进行身份审核，确保用户身份真实有效。

【操作者】
系统管理员

【输入】
- 审核状态：枚举型（通过/拒绝）
- 审核意见：字符型，最多200字
- 审核时间：日期型，YYYY-MM-DD HH:mm:ss

【输出】
- 审核结果：审核状态及意见
- 审核记录：包含审核人、时间、结果等信息

【数据来源】
user_info表
audit_info表

【展示界面】
审核管理列表页面，包含待审核用户列表和审核操作界面
5.2.3	用户登录
【功能概述】
用户通过账号密码登录系统，支持多角色登录。

【操作者】
所有用户

【输入】
- 用户名：字符型，6-20位字符
- 密码：字符型，8-20位加密字符
- 验证码：字符型，6位数字（可选）

【输出】
- 登录结果：成功/失败
- 用户信息：包含用户基本信息和角色信息

【数据来源】
user_info表

【展示界面】
登录页面，包含登录表单

5.2.4	用户信息查询
【功能概述】
查看用户的基本信息、角色信息等。

【操作者】
系统管理员

【输入】
- 查询条件：用户ID/用户名/手机号
- 时间范围：YYYY-MM-DD
- 用户状态：枚举型（全部/正常/禁用/待审核）

【输出】
- 用户列表：包含基本信息和状态

【数据来源】
user_info表

【展示界面】
用户管理列表页面，支持条件筛选和详情查看
5.2.5	商品审核
【功能概述】
管理员对商家发布的商品信息进行合规性审核。

【操作者】
系统管理员

【输入】
- 审核状态：枚举型（通过/拒绝）
- 审核意见：字符型，最多200字
- 审核时间：日期型，YYYY-MM-DD HH:mm:ss

【输出】
- 审核结果：审核状态及意见
- 审核记录：包含审核人、时间、结果等
- 商品状态更新结果

【数据来源】
goods_info表
audit_info表

【展示界面】
商品审核列表页面，包含待审核商品列表和审核操作界面
5.2.6	交易参数配置
【功能概述】
配置系统交易相关的参数，如支付超时时间、订单自动确认时间等。

【操作者】
系统管理员

【输入】
- 参数名称：字符型
- 参数值：数值型/字符型
- 参数说明：字符型，参数用途说明
- 生效时间：日期型，YYYY-MM-DD HH:mm:ss

【输出】
- 配置结果：成功/失败
- 参数列表：当前所有交易参数
- 修改记录：参数变更历史

【数据来源】
sys_param表

【展示界面】
交易参数配置页面，支持参数查看和修改
5.2.7	仲裁参数配置
【功能概述】
配置仲裁相关参数，如仲裁员数量、投票时限、奖励比例等。

【操作者】
系统管理员

【输入】
- 参数名称：字符型
- 参数值：数值型/字符型
- 参数说明：字符型，参数用途说明
- 生效时间：日期型，YYYY-MM-DD HH:mm:ss

【输出】
- 配置结果：成功/失败
- 参数列表：当前所有仲裁参数
- 修改记录：参数变更历史

【数据来源】
sys_param表

【展示界面】
仲裁参数配置页面，支持参数查看和修改
5.3	链上数据管理
链上数据管理模块负责系统与区块链的交互，实现数据上链和链上数据管理。主要包括智能合约管理、交易上链、数据存证、链上数据查询等功能。
5.3.1	合约部署
【功能概述】
部署智能合约到区块链网络。

【操作者】
管理员

【输入】
- 合约名称：字符型
- 合约文件：字节码文件
- 合约参数：部署参数配置

【输出】
- 部署结果：成功/失败
- 合约地址：部署后的合约地址
- 部署信息：部署相关详情

【数据来源】
chain_contract表

【展示界面】
合约部署页面，支持合约上传和部署操作
5.3.2	交易数据上链
【功能概述】
将系统交易数据存储到区块链。

【操作者】
区块链管理员

【输入】
- 交易数据：交易相关信息
- 上链时间：YYYY-MM-DD HH:mm:ss
- 数据类型：枚举型（订单/评价/仲裁）

【输出】
- 上链结果：成功/失败
- 交易哈希：区块链交易哈希
- 区块信息：所在区块详情

【数据来源】
chain_transaction表

【展示界面】
数据上链页面，支持数据提交和状态查看
5.3.3	上链状态查询
【功能概述】
查询交易数据的上链状态和结果。

【操作者】
管理员

【输入】
- 交易哈希：字符型，区块链交易哈希值
- 数据类型：枚举型（订单/评价/仲裁）
- 时间范围：YYYY-MM-DD HH:mm:ss
- 上链状态：枚举型（全部/成功/失败/处理中）

【输出】
- 上链状态：当前处理状态
- 区块高度：数据所在区块高度
- 确认数：交易确认区块数
- 上链时间：数据上链时间戳
- 失败原因：上链失败时的错误信息

【数据来源】
wallet_transaction表

【展示界面】
上链状态查询页面 
5.3.4	链上数据查询
【功能概述】
查询已上链的业务数据内容和存证信息。

【操作者】
区块链管理员

【输入】
- 查询类型：枚举型（交易数据/存证数据）
- 业务标识：字符型（订单号/案件号）
- 时间范围：YYYY-MM-DD HH:mm:ss
- 存证哈希：字符型，可选

【输出】
- 链上数据：业务数据内容
- 存证信息：
  - 存证哈希值
  - 存证时间
  - 存证状态
- 区块信息：
  - 区块高度
  - 区块时间
  - 交易哈希

【数据来源】
链上

【展示界面】
链上数据查询页面
5.3.5	仲裁存证
【功能概述】
将仲裁相关数据进行链上存证。

【操作者】
管理员

【输入】
- 案件编号：字符型
- 存证内容：仲裁相关数据
- 存证时间：YYYY-MM-DD HH:mm:ss

【输出】
- 存证结果：成功/失败
- 存证哈希：存证唯一标识
- 区块信息：所在区块高度

【数据来源】
chain_evidence表

【展示界面】
存证管理页面，支持存证提交和查询

5.4	商品管理
商品管理模块负责整个平台的商品信息管理，实现商品的录入、审核、上下架等全生命周期管理。主要包括商品信息维护、分类管理、商品审核、上下架管理、商品搜索等功能。
5.4.1	商品信息录入
【功能概述】
卖家录入商品的基本信息。

【操作者】
卖家

【输入】
- 商品名称：字符型，2-50字符
- 商品描述：字符型，最多1000字
- 商品价格：数值型，精确到分
- 商品图片：字符串，图片文件url

【输出】
- 录入结果：成功/失败
- 商品ID：系统生成的商品标识
- 审核状态：待审核

【数据来源】
goods_info表

【展示界面】
商品录入表单页面
5.4.2	商品上架
【功能概述】
卖家将审核通过的商品上架销售。

【操作者】
卖家

【输入】
- 商品ID：字符型
- 上架时间：YYYY-MM-DD HH:mm:ss
- 商品状态：上架

【输出】
- 上架结果：成功/失败
- 商品状态：已上架
- 上架时间：实际上架时间

【数据来源】
goods_info表

【展示界面】
商品管理页面，支持上架操作
5.4.3	商品下架
【功能概述】
卖家将已上架商品下架。

【操作者】
卖家

【输入】
- 商品ID：字符型
- 下架时间：YYYY-MM-DD HH:mm:ss
- 下架原因：字符型，可选

【输出】
- 下架结果：成功/失败
- 商品状态：已下架
- 下架时间：实际下架时间

【数据来源】
goods_info表

【展示界面】
商品管理页面，支持下架操作
5.4.4	分类商品查询
【功能概述】
普通用户搜索查找商品。

【操作者】
普通用户

【输入】
- 关键词：字符型
- 分类：商品分类
- 价格区间：数值型
- 排序方式：枚举型（价格/时间）

【输出】
- 商品列表：符合条件的商品
- 分页信息：总数、当前页
- 排序结果：按指定方式排序

【数据来源】
goods_category表

【展示界面】
商品搜索页面，支持条件筛选

5.4.5	商品详情查看
【功能概述】
查看商品的详细信息。

【操作者】
用户

【输入】
- 商品ID：字符型

【输出】
- 商品信息：基本信息（含前拥有者，可溯源）
- 图片列表：商品图片
- 商品状态：当前状态

【数据来源】
goods_info表

【展示界面】
商品详情页面


5.5	仲裁管理
仲裁管理模块负责处理交易过程中产生的争议，通过仲裁投票方式解决纠纷。主要包括争议提交、证据管理、仲裁投票、结果统计、奖励发放等功能。
5.5.1	争议内容提交
【功能概述】
买家提交交易争议内容。

【操作者】
买家

【输入】
- 订单编号：字符型
- 争议类型：枚举型
- 争议描述：字符型

【输出】
- 案件编号：系统生成
- 提交状态：成功/失败

【数据来源】
arbitration_case表

【展示界面】
争议提交页面
5.5.2	证据材料上传
【功能概述】
上传争议相关证据材料。

【操作者】
买家

【输入】
- 案件编号：字符型
- 证据文件：文件
- 证据说明：字符型

【输出】
- 上传结果：成功/失败
- 证据哈希：文件哈希值

【数据来源】
arbitration_case表

【展示界面】
证据上传页面
5.5.3	案件列表查看
【功能概述】
查看仲裁案件列表。

【操作者】
所有

【输入】
- 案件状态：枚举型（待处理/处理中/已完成）
- 时间范围：YYYY-MM-DD

【输出】
- 案件列表：案件基本信息
- 分页信息：总数、页码

【数据来源】
arbitration_case表

【展示界面】
案件列表页面
5.5.4	案件详情查看
【功能概述】
查看仲裁案件详细信息。

【操作者】
所有

【输入】
- 案件编号：字符型

【输出】
- 案件信息：详细信息
- 证据材料：证据列表
- 处理状态：当前状态

【数据来源】
arbitration_case表

【展示界面】
案件详情页面
5.5.5	仲裁投票
【功能概述】
仲裁员对案件进行投票。

【操作者】
被选为仲裁员的用户

【输入】
- 案件编号：字符型
- 投票结果：枚举型（支持/反对）
- 投票说明：字符型

【输出】
- 投票状态：成功/失败
- 投票时间：系统时间

【数据来源】
arbitration_vote表

【展示界面】
投票操作页面
5.5.6	投票结果统计
【功能概述】
统计案件投票结果。

【操作者】
系统自动

【输入】
- 案件编号：字符型

【输出】
- 支持票数：数值型
- 反对票数：数值型
- 最终结果：枚举型

【数据来源】
arbitration_vote表

【展示界面】
结果统计页面
5.5.7	仲裁奖励计算
【功能概述】
计算仲裁员参与投票的奖励。

【操作者】
系统自动

【输入】
- 案件编号：字符型
- 投票记录：投票信息

【输出】
- 奖励积分：数值型
- 计算结果：成功/失败

【数据来源】
arbitration_reward表

【展示界面】
奖励计算结果页面
5.5.8	仲裁奖励领取
【功能概述】
仲裁员领取投票奖励。

【操作者】
被选为仲裁员的用户

【输入】
- 用户ID：字符型
- 奖励ID：字符型

【输出】
- 领取结果：成功/失败
- 领取积分：数值型

【数据来源】
arbitration_reward表

【展示界面】
奖励领取页面

5.5.9	奖励发放记录
【功能概述】
查看奖励发放历史记录。

【操作者】
被选为仲裁员的用户、系统管理员

【输入】
- 用户ID：字符型
- 时间范围：YYYY-MM-DD

【输出】
- 奖励记录：发放历史
- 统计信息：总积分

【数据来源】
arbitration_reward表

【展示界面】
奖励记录页面
5.6	订单管理
订单管理模块负责交易订单的全流程管理，跟踪订单从创建到完成的整个过程。主要包括订单创建、支付管理、物流管理、订单状态跟踪、评价管理等功能。
5.6.1	创建订单
【功能概述】
买家创建商品购买订单。

【操作者】
买家

【输入】
- 商品ID：字符型
- 购买数量：数值型
- 收货信息：字符型

【输出】
- 订单编号：系统生成
- 订单金额：数值型

【数据来源】
order_info表

【展示界面】
订单创建页面

5.6.2	订单支付
【功能概述】
买家支付订单金额。

【操作者】
买家

【输入】
- 订单编号：字符型
- 支付方式：枚举型

【输出】
- 支付结果：成功/失败
- 支付时间：系统时间

【数据来源】
order_info表

【展示界面】
订单支付页面
5.6.3	订单状态查询
【功能概述】
查询订单当前状态。

【操作者】
买家、卖家

【输入】
- 订单编号：字符型

【输出】
- 订单状态：当前状态
- 订单信息：基本信息

【数据来源】
order_info表

【展示界面】
订单查询页面
5.6.4	订单列表查看
【功能概述】
查看订单列表信息。

【操作者】
买家、卖家

【输入】
- 订单状态：枚举型（全部/待付款/待发货/已完成）
- 时间范围：YYYY-MM-DD

【输出】
- 订单列表：订单信息
- 分页信息：总数、页码

【数据来源】
order_info表

【展示界面】
订单列表页面
5.6.5	物流信息录入
【功能概述】
卖家录入订单物流信息。

【操作者】
卖家

【输入】
- 订单编号：字符型
- 物流编号：字符型
- 发货时间：YYYY-MM-DD HH:mm:ss

【输出】
- 录入结果：成功/失败
- 订单状态：更新为已发货

【数据来源】
order_info表

【展示界面】
物流信息录入页面

5.6.6	物流状态更新
【功能概述】
更新订单物流状态。

【操作者】
系统自动、买家确认收货

【输入】
- 订单编号：字符型
- 物流状态：枚举型（运输中/已送达/已签收）

【输出】
- 更新结果：成功/失败
- 更新时间：系统时间

【数据来源】
order_info表

【展示界面】
物流状态页面
5.6.7	评价打分
【功能概述】
买家对已完成订单进行评价。

【操作者】
买家

【输入】
- 订单编号：字符型
- 评分：数值型（1-5分）
- 评价内容：字符型

【输出】
- 评价结果：成功/失败
- 评价时间：系统时间

【数据来源】
order_info表

【展示界面】
评价提交页面
5.6.8	评价记录查看
【功能概述】
查看订单评价记录。

【操作者】
买家、卖家

【输入】
- 订单编号：字符型

【输出】
- 评价信息：评分和内容
- 评价时间：评价提交时间

【数据来源】
order_info表

【展示界面】
评价记录页面

6	非功能需求
6.1	性能需求
-	满足基本性能需求即基本功能快速响应即可
6.2	安全保密需求
1. 用户认证
   - 密码必须加密存储

2. 数据安全
   - 用户密码采用MD5加密
   - 定期数据备份

3. 访问控制
   - 基于角色的权限管理
   - 敏感操作需二次确认。
6.3	扩展性需求
1. 功能扩展
   - 支持新增商品分类
   - 预留API接口扩展（如物流模块）

2. 系统扩展
   - 支持新功能模块添加
6.4	稳定性需求
1. 系统可用性
   - 系统运行时间>99%
   - 支持基本的错误处理

2. 异常处理
   - 系统错误可及时发现
   - 提供友好的错误提示
6.5	部署需求
部署方式
- 采用B/S架构
- 单服务器部署
- 支持本地开发环境。
7	界面要求
7.1	图形要求
1. 整体风格
   - 采用简洁现代的设计风格
   - 使用统一的配色方案
   - 保持界面布局一致性
   - 适配PC端和移动端显示

2. 操作交互
   - 重要按钮醒目显示
   - 危险操作需二次确认
   - 必填项标记明显
   - 提供操作引导和提示

3. 数据输入
   - 商品分类使用下拉框选择
   - 价格输入限制数字格式
   - 日期选择使用日期控件

4. 数据展示
   - 商品列表采用网格式布局
   - 订单列表使用表格形式
   - 长列表采用分页显示
   - 支持列表排序和筛选

5. 响应设计
   - 页面自适应不同屏幕
   - 操作按钮适合触屏点击
7.2	报表格式
无特殊要求，各报表包含基本信息即可。
7.3	其他
 交互反馈
   - 操作成功提示
   - 错误信息提示
   - 加载进度显示
